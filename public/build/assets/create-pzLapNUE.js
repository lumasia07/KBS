import{c as X,r as Y,u as Z,j as t,t as T,H as ee,L as B,b as te}from"./app-XxGQqHEn.js";import{A as se}from"./app-layout-CPmwDeKB.js";import{A as ae}from"./arrow-left-5_xDRvaF.js";import{C as re}from"./circle-check-BWCHmSA2.js";import{S as le}from"./save-DCfoL23k.js";/* empty css            */import"./button-Bl64q_Yk.js";import"./Combination-DsTawVx1.js";import"./x-CTpenCwg.js";import"./createLucideIcon-B9VDQ0kY.js";import"./index-CjOQgEXZ.js";import"./index-EBLA1b0H.js";import"./users-BhW82ob4.js";const oe=[{title:"Taxpayer Portal",href:"/taxpayer/dashboard"},{title:"My Products",href:"/taxpayer/products"},{title:"Add Product",href:"/taxpayer/products/create"}];function Ce(r){const e=X.c(58),{availableProducts:M}=r,$=M===void 0?[]:M,[l,G]=Y.useState(""),J=Array.from(new Set($.map(ue))).sort();let b;e[0]!==l?(b=a=>l?a.category===l:!0,e[0]=l,e[1]=b):b=e[1];const K=$.filter(b);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g={product_id:"",health_certificate_number:"",health_certificate_expiry:"",notes:""},e[2]=g):g=e[2];const s=Z(g);let _;e[3]!==s||e[4]!==l?(_=a=>{if(a.preventDefault(),!l){T.error("Please select a product category");return}if(!s.data.product_id){T.error("Please select a product");return}s.post("/taxpayer/products",{onSuccess:ne,onError:de})},e[3]=s,e[4]=l,e[5]=_):_=e[5];const Q=_;let y;e[6]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(ee,{title:"Add Product"}),e[6]=y):y=e[6];let j;e[7]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(B,{href:"/taxpayer/products",className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-white rounded-full transition-colors",children:t.jsx(ae,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Add New Product"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Register a new product to your catalogue"})]})]}),e[7]=j):j=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("h3",{className:"text-lg font-semibold text-slate-900 border-b border-slate-100 pb-2",children:"1. Product Details"}),e[8]=v):v=e[8];let N;e[9]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Category ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[9]=N):N=e[9];let w;e[10]!==s?(w=a=>{G(a.target.value),s.setData("product_id","")},e[10]=s,e[11]=w):w=e[11];let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("option",{value:"",children:"-- Select a Category --"}),e[12]=S):S=e[12];let o;e[13]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Product ",t.jsx("span",{className:"text-red-500",children:"*"})]}),e[13]=o):o=e[13];const U=s.data.product_id;let i;e[14]!==s?(i=a=>s.setData("product_id",a.target.value),e[14]=s,e[15]=i):i=e[15];const V="w-full px-4 py-3 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors disabled:bg-slate-100 disabled:text-slate-400",W=!0,q=!l,F=l?"select a product...":"Select a category first...";let c;e[16]!==F?(c=t.jsx("option",{value:"",children:F}),e[16]=F,e[17]=c):c=e[17];const I=K.map(ie);let d;e[18]!==s.data.product_id||e[19]!==i||e[20]!==q||e[21]!==c||e[22]!==I?(d=t.jsxs("select",{value:U,onChange:i,className:V,required:W,disabled:q,children:[c,I]}),e[18]=s.data.product_id,e[19]=i,e[20]=q,e[21]=c,e[22]=I,e[23]=d):d=e[23];let C;e[24]!==o||e[25]!==d?(C=t.jsxs("div",{children:[o,d]}),e[24]=o,e[25]=d,e[26]=C):C=e[26];let P;e[27]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("h3",{className:"text-lg font-semibold text-slate-900 border-b border-slate-100 pb-2",children:"2. Authorization (Optional)"}),e[27]=P):P=e[27];let A;e[28]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200 mb-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(re,{className:"w-5 h-5 text-[#003366] mt-0.5"}),t.jsx("p",{className:"text-sm text-slate-600",children:"If this product requires a health certificate or specific authorization, please enter the details below. Otherwise, you can leave these fields blank."})]})}),e[28]=A):A=e[28];let k;e[29]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Health Certificate Number"}),e[29]=k):k=e[29];let n;e[30]!==s?(n=a=>s.setData("health_certificate_number",a.target.value),e[30]=s,e[31]=n):n=e[31];let m;e[32]!==s.data.health_certificate_number||e[33]!==n?(m=t.jsxs("div",{children:[k,t.jsx("input",{type:"text",value:s.data.health_certificate_number,onChange:n,placeholder:"e.g. HC-2024-001",className:"w-full px-4 py-3 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors"})]}),e[32]=s.data.health_certificate_number,e[33]=n,e[34]=m):m=e[34];let D;e[35]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Certificate Expiry Date"}),e[35]=D):D=e[35];let u;e[36]!==s?(u=a=>s.setData("health_certificate_expiry",a.target.value),e[36]=s,e[37]=u):u=e[37];let f;e[38]!==s.data.health_certificate_expiry||e[39]!==u?(f=t.jsxs("div",{children:[D,t.jsx("input",{type:"date",value:s.data.health_certificate_expiry,onChange:u,className:"w-full px-4 py-3 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors"})]}),e[38]=s.data.health_certificate_expiry,e[39]=u,e[40]=f):f=e[40];let h;e[41]!==m||e[42]!==f?(h=t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[m,f]}),e[41]=m,e[42]=f,e[43]=h):h=e[43];let E;e[44]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Internal Notes"}),e[44]=E):E=e[44];let x;e[45]!==s?(x=a=>s.setData("notes",a.target.value),e[45]=s,e[46]=x):x=e[46];let p;e[47]!==s.data.notes||e[48]!==x?(p=t.jsxs("div",{children:[E,t.jsx("textarea",{value:s.data.notes,onChange:x,rows:4,placeholder:"Add any internal reference notes for this product...",className:"w-full px-4 py-3 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors resize-none"})]}),e[47]=s.data.notes,e[48]=x,e[49]=p):p=e[49];let z;e[50]!==h||e[51]!==p?(z=t.jsxs("div",{className:"space-y-6",children:[P,A,h,p]}),e[50]=h,e[51]=p,e[52]=z):z=e[52];let H;e[53]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(B,{href:"/taxpayer/products",className:"px-6 py-3 border border-slate-300 text-slate-700 font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),e[53]=H):H=e[53];let L;e[54]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(le,{className:"w-5 h-5"}),e[54]=L):L=e[54];const O=s.processing?"Adding to Catalogue...":"Add Product";let R;return e[55]!==s.processing||e[56]!==O?(R=t.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-slate-200",children:[H,t.jsxs("button",{type:"submit",disabled:s.processing,className:"inline-flex items-center gap-2 px-6 py-3 bg-[#003366] text-white font-medium rounded-lg hover:bg-[#002244] transition-colors shadow-lg shadow-[#003366]/20 disabled:opacity-70 disabled:cursor-not-allowed",children:[L,O]})]}),e[55]=s.processing,e[56]=O,e[57]=R):R=e[57],t.jsxs(se,{breadcrumbs:oe,children:[y,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-6 p-6 bg-slate-50",children:t.jsxs("div",{className:"max-w-3xl mx-auto w-full",children:[j,t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:t.jsxs("form",{onSubmit:Q,className:"p-8 space-y-8",children:[t.jsxs("div",{className:"space-y-6",children:[v,t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs("div",{children:[N,t.jsxs("select",{value:l,onChange:w,className:"w-full px-4 py-3 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors",children:[S,J.map(ce)]})]}),C]})]}),z,R]})})]})})]})}function ie(r){return t.jsxs("option",{value:r.id,children:[r.name," (",r.code,")"]},r.id)}function ce(r){return t.jsx("option",{value:r,className:"capitalize",children:r},r)}function de(){T.error("Failed to add product. Please check the inputs.")}function ne(){T.success("Product added successfully! Redirecting..."),setTimeout(me,1500)}function me(){te.visit("/taxpayer/products")}function ue(r){return r.category}export{Ce as default};
