import{c as le,r as K,u as re,j as t,L as U,t as v,b as te,H as ie}from"./app-uM-PAfCE.js";import{c as ce,T as oe}from"./react-QUNPBqHu.js";import{a as W,A as ne}from"./app-layout-Dy1iYxBT.js";import{P as Z}from"./plus-Cav0Jl-f.js";import{F as ee}from"./users-kadJDkF9.js";import{c as de}from"./createLucideIcon-DbKPOAFU.js";import{X as xe}from"./x-oZdVZXX7.js";import{C as me}from"./circle-check-CB40TIjC.js";/* empty css            */import"./button-ViEb6EJD.js";import"./Combination-Bijxp1xg.js";import"./index-p1i7ejeS.js";import"./index-EBLA1b0H.js";const he=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ue=de("pen-line",he),fe=ce(r=>({products:[],setProducts:e=>r({products:e}),removeProduct:e=>r(o=>({products:o.products.filter(n=>n.id!==e)})),updateProduct:(e,o)=>r(n=>({products:n.products.map(i=>i.id===e?{...i,...o}:i)}))}));function Le(r){const e=le.c(62),{myProducts:o}=r;let n;e[0]!==o?(n=o===void 0?[]:o,e[0]=o,e[1]=n):n=e[1];const i=n,[V,w]=K.useState(!1),[c,Q]=K.useState(null);let _;e[2]===Symbol.for("react.memo_cache_sentinel")?(_=[{title:"Dashboard",href:"/taxpayer/dashboard"},{title:"My Products",href:"/taxpayer/products"}],e[2]=_):_=e[2];const se=_,{products:l,setProducts:X,removeProduct:Y,updateProduct:q}=fe();let P;e[3]!==i||e[4]!==X?(P=()=>{X(i)},e[3]=i,e[4]=X,e[5]=P):P=e[5];let S;e[6]!==i?(S=[i],e[6]=i,e[7]=S):S=e[7],K.useEffect(P,S);let C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C={health_certificate_number:"",health_certificate_expiry:"",notes:"",status:"active"},e[8]=C):C=e[8];const a=re(C);let k;e[9]!==a||e[10]!==c||e[11]!==q?(k=s=>{s.preventDefault(),c&&a.patch(`/taxpayer/products/${c.id}`,{onSuccess:()=>{v.success("Product updated successfully!"),q(c.id,{health_certificate_number:a.data.health_certificate_number,health_certificate_expiry:a.data.health_certificate_expiry,notes:a.data.notes,status:a.data.status}),w(!1),Q(null)},onError:ye})},e[9]=a,e[10]=c,e[11]=q,e[12]=k):k=e[12];const B=k;let E;e[13]!==Y?(E=s=>{confirm("Are you sure you want to remove this product from your catalogue?")&&(Y(s),v.info("Product removed"),te.delete(`/taxpayer/products/${s}`,{onSuccess:Ne,onError:ge}))},e[13]=Y,e[14]=E):E=e[14];const G=E;let A;e[15]!==a?(A=s=>{Q(s),a.setData({health_certificate_number:s.health_certificate_number||"",health_certificate_expiry:s.health_certificate_expiry||"",notes:s.notes||"",status:s.status||"active"}),w(!0)},e[15]=a,e[16]=A):A=e[16];const J=A,ae=je;let M;e[17]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(ie,{title:"My Products"}),e[17]=M):M=e[17];let D;e[18]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Product Catalogue"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Manage products registered under your enterprise"})]}),e[18]=D):D=e[18];let F;e[19]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsxs("div",{className:"flex items-center justify-between",children:[D,t.jsxs(U,{href:"/taxpayer/products/create",className:"flex items-center gap-2 px-4 py-2.5 bg-[#003366] text-white rounded-lg hover:bg-[#002244] transition-colors shadow-md",children:[t.jsx(Z,{className:"w-4 h-4"}),"Add Product"]})]}),e[19]=F):F=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("p",{className:"text-xs text-white/70",children:"Total Products"}),e[20]=z):z=e[20];let d;e[21]!==l.length?(d=t.jsxs("div",{children:[z,t.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),e[21]=l.length,e[22]=d):d=e[22];let L;e[23]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(W,{className:"w-8 h-8 text-white/30"}),e[23]=L):L=e[23];let x;e[24]!==d?(x=t.jsx("div",{className:"bg-gradient-to-br from-[#003366] to-[#002244] rounded-xl p-4 text-white shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[d,L]})}),e[24]=d,e[25]=x):x=e[25];let R;e[26]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("p",{className:"text-xs text-white/70",children:"Active Products"}),e[26]=R):R=e[26];let m;e[27]!==l?(m=l.filter(be),e[27]=l,e[28]=m):m=e[28];let h;e[29]!==m.length?(h=t.jsxs("div",{children:[R,t.jsx("p",{className:"text-2xl font-bold",children:m.length})]}),e[29]=m.length,e[30]=h):h=e[30];let T;e[31]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(me,{className:"w-8 h-8 text-white/30"}),e[31]=T):T=e[31];let u;e[32]!==h?(u=t.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-4 text-white shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[h,T]})}),e[32]=h,e[33]=u):u=e[33];let H;e[34]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("p",{className:"text-xs text-white/70",children:"Pending Approval"}),e[34]=H):H=e[34];let f;e[35]!==l?(f=l.filter(pe),e[35]=l,e[36]=f):f=e[36];let p;e[37]!==f.length?(p=t.jsxs("div",{children:[H,t.jsx("p",{className:"text-2xl font-bold",children:f.length})]}),e[37]=f.length,e[38]=p):p=e[38];let $;e[39]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(ee,{className:"w-8 h-8 text-white/30"}),e[39]=$):$=e[39];let b;e[40]!==p?(b=t.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl p-4 text-white shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[p,$]})}),e[40]=p,e[41]=b):b=e[41];let j;e[42]!==x||e[43]!==u||e[44]!==b?(j=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[x,u,b]}),e[42]=x,e[43]=u,e[44]=b,e[45]=j):j=e[45];let I;e[46]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("div",{className:"p-6 border-b border-slate-200",children:t.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Registered Products"})}),e[46]=I):I=e[46];let g;e[47]!==G||e[48]!==J||e[49]!==l?(g=t.jsxs("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden",children:[I,l.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(W,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No products yet"}),t.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Add products to your catalogue to start ordering stamps."}),t.jsxs(U,{href:"/taxpayer/products/create",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#003366] text-white rounded-lg hover:bg-[#002244] transition-colors",children:[t.jsx(Z,{className:"w-4 h-4"}),"Add Your First Product"]})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Product"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Category"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Certificate"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Status"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(s=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.name}),t.jsx("p",{className:"text-xs text-slate-500",children:s.code}),t.jsx("p",{className:"text-xs text-slate-400 capitalize",children:s.unit_type})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"inline-flex px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700 capitalize",children:(typeof s.category=="object"&&s.category!==null?String(s.category.name||""):String(s.category||""))||"N/A"})}),t.jsxs("td",{className:"px-6 py-4",children:[s.certificate_path?t.jsxs("a",{href:s.certificate_path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-[#003366] hover:underline",children:[t.jsx(ee,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs",children:"View Cert"})]}):t.jsx("span",{className:"text-xs text-slate-400",children:"No file"}),s.health_certificate_number&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["#",s.health_certificate_number]})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:`inline-flex items-center w-fit px-2.5 py-1 rounded-full text-xs font-medium capitalize ${ae(s.status)}`,children:s.status}),s.status==="rejected"&&s.rejection_reason&&t.jsx("span",{className:"text-xs text-red-600 max-w-[150px] truncate",title:s.rejection_reason,children:s.rejection_reason})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>J(s),className:"p-1.5 text-slate-400 hover:text-[#003366] hover:bg-[#003366]/10 rounded transition-colors",title:"Edit",children:t.jsx(ue,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>G(s.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",children:t.jsx(oe,{className:"w-4 h-4"})})]})})]},s.id))})]})})]}),e[47]=G,e[48]=J,e[49]=l,e[50]=g):g=e[50];let N;e[51]!==j||e[52]!==g?(N=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6 bg-slate-50",children:[F,j,g]}),e[51]=j,e[52]=g,e[53]=N):N=e[53];let y;e[54]!==a||e[55]!==B||e[56]!==c||e[57]!==V?(y=V&&c&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Edit Product"}),t.jsx("p",{className:"text-sm text-slate-500",children:c.name})]}),t.jsx("button",{onClick:()=>w(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx(xe,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:B,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Health Certificate #"}),t.jsx("input",{type:"text",value:a.data.health_certificate_number,onChange:s=>a.setData("health_certificate_number",s.target.value),placeholder:"HC-12345",className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Expiry Date"}),t.jsx("input",{type:"date",value:a.data.health_certificate_expiry,onChange:s=>a.setData("health_certificate_expiry",s.target.value),className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),t.jsxs("select",{value:a.data.status,onChange:s=>a.setData("status",s.target.value),className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes (Optional)"}),t.jsx("textarea",{value:a.data.notes,onChange:s=>a.setData("notes",s.target.value),rows:3,placeholder:"Any additional notes...",className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors resize-none"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a.processing,className:"flex-1 px-4 py-2.5 bg-[#003366] text-white rounded-lg hover:bg-[#002244] transition-colors disabled:opacity-50",children:a.processing?"Saving...":"Save Changes"})]})]})]})}),e[54]=a,e[55]=B,e[56]=c,e[57]=V,e[58]=y):y=e[58];let O;return e[59]!==N||e[60]!==y?(O=t.jsxs(ne,{breadcrumbs:se,children:[M,N,y]}),e[59]=N,e[60]=y,e[61]=O):O=e[61],O}function pe(r){return r.status==="pending"}function be(r){return r.status==="active"}function je(r){switch(r){case"active":return"bg-emerald-100 text-emerald-700";case"pending":return"bg-blue-100 text-blue-700";case"rejected":return"bg-red-100 text-red-700";case"suspended":return"bg-amber-100 text-amber-700";case"expired":return"bg-slate-100 text-slate-700";default:return"bg-slate-100 text-slate-600"}}function ge(){v.error("Failed to remove product. Reloading..."),te.reload()}function Ne(){v.success("Product removed permanently")}function ye(){v.error("Failed to update product")}export{Le as default};
