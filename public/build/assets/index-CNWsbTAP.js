import{c as te,r as K,u as se,j as t,L as U,t as v,b as ee,H as ae}from"./app-XxGQqHEn.js";import{b as V,A as le}from"./app-layout-CPmwDeKB.js";import{c as re,T as ie}from"./react-B9WKm0wh.js";import{P as W}from"./plus-DIkrfwwE.js";import{C as Z}from"./circle-check-BWCHmSA2.js";import{C as ce}from"./circle-alert-B1Nlhy1c.js";import{c as oe}from"./createLucideIcon-B9VDQ0kY.js";import{X as ne}from"./x-CTpenCwg.js";import{F as de}from"./users-BhW82ob4.js";/* empty css            */import"./button-Bl64q_Yk.js";import"./Combination-DsTawVx1.js";import"./index-CjOQgEXZ.js";import"./index-EBLA1b0H.js";const xe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],me=oe("pen-line",xe),he=re(i=>({products:[],setProducts:e=>i({products:e}),removeProduct:e=>i(o=>({products:o.products.filter(n=>n.id!==e)})),updateProduct:(e,o)=>i(n=>({products:n.products.map(r=>r.id===e?{...r,...o}:r)}))})),ue=[{title:"Taxpayer Portal",href:"/taxpayer/dashboard"},{title:"My Products",href:"/taxpayer/products"}];function Fe(i){const e=te.c(61),{myProducts:o}=i;let n;e[0]!==o?(n=o===void 0?[]:o,e[0]=o,e[1]=n):n=e[1];const r=n,[I,_]=K.useState(!1),[c,Q]=K.useState(null),{products:l,setProducts:O,removeProduct:X,updateProduct:Y}=he();let w;e[2]!==r||e[3]!==O?(w=()=>{O(r)},e[2]=r,e[3]=O,e[4]=w):w=e[4];let P;e[5]!==r?(P=[r],e[5]=r,e[6]=P):P=e[6],K.useEffect(w,P);let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S={health_certificate_number:"",health_certificate_expiry:"",notes:"",status:"active"},e[7]=S):S=e[7];const a=se(S);let C;e[8]!==a||e[9]!==c||e[10]!==Y?(C=s=>{s.preventDefault(),c&&a.patch(`/taxpayer/products/${c.id}`,{onSuccess:()=>{v.success("Product updated successfully!"),Y(c.id,{health_certificate_number:a.data.health_certificate_number,health_certificate_expiry:a.data.health_certificate_expiry,notes:a.data.notes,status:a.data.status}),_(!1),Q(null)},onError:ge})},e[8]=a,e[9]=c,e[10]=Y,e[11]=C):C=e[11];const B=C;let k;e[12]!==X?(k=s=>{confirm("Are you sure you want to remove this product from your catalogue?")&&(X(s),v.info("Product removed"),ee.delete(`/taxpayer/products/${s}`,{onSuccess:je,onError:be}))},e[12]=X,e[13]=k):k=e[13];const G=k;let E;e[14]!==a?(E=s=>{Q(s),a.setData({health_certificate_number:s.health_certificate_number||"",health_certificate_expiry:s.health_certificate_expiry||"",notes:s.notes||"",status:s.status||"active"}),_(!0)},e[14]=a,e[15]=E):E=e[15];const J=E;let A;e[16]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(ae,{title:"My Products"}),e[16]=A):A=e[16];let M;e[17]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Product Catalogue"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Manage products registered under your enterprise"})]}),e[17]=M):M=e[17];let R;e[18]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsxs("div",{className:"flex items-center justify-between",children:[M,t.jsxs(U,{href:"/taxpayer/products/create",className:"flex items-center gap-2 px-4 py-2.5 bg-[#003366] text-white rounded-lg hover:bg-[#002244] transition-colors shadow-md",children:[t.jsx(W,{className:"w-4 h-4"}),"Add Product"]})]}),e[18]=R):R=e[18];let D;e[19]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("p",{className:"text-xs text-white/70",children:"Total Products"}),e[19]=D):D=e[19];let d;e[20]!==l.length?(d=t.jsxs("div",{children:[D,t.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),e[20]=l.length,e[21]=d):d=e[21];let F;e[22]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(V,{className:"w-8 h-8 text-white/30"}),e[22]=F):F=e[22];let x;e[23]!==d?(x=t.jsx("div",{className:"bg-gradient-to-br from-[#003366] to-[#002244] rounded-xl p-4 text-white shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[d,F]})}),e[23]=d,e[24]=x):x=e[24];let H;e[25]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("p",{className:"text-xs text-white/70",children:"Active Products"}),e[25]=H):H=e[25];let m;e[26]!==l?(m=l.filter(pe),e[26]=l,e[27]=m):m=e[27];let h;e[28]!==m.length?(h=t.jsxs("div",{children:[H,t.jsx("p",{className:"text-2xl font-bold",children:m.length})]}),e[28]=m.length,e[29]=h):h=e[29];let L;e[30]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(Z,{className:"w-8 h-8 text-white/30"}),e[30]=L):L=e[30];let u;e[31]!==h?(u=t.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-4 text-white shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[h,L]})}),e[31]=h,e[32]=u):u=e[32];let T;e[33]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("p",{className:"text-xs text-white/70",children:"Requires Health Cert"}),e[33]=T):T=e[33];let f;e[34]!==l?(f=l.filter(fe),e[34]=l,e[35]=f):f=e[35];let p;e[36]!==f.length?(p=t.jsxs("div",{children:[T,t.jsx("p",{className:"text-2xl font-bold",children:f.length})]}),e[36]=f.length,e[37]=p):p=e[37];let q;e[38]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(de,{className:"w-8 h-8 text-white/30"}),e[38]=q):q=e[38];let b;e[39]!==p?(b=t.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-4 text-white shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[p,q]})}),e[39]=p,e[40]=b):b=e[40];let j;e[41]!==x||e[42]!==u||e[43]!==b?(j=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[x,u,b]}),e[41]=x,e[42]=u,e[43]=b,e[44]=j):j=e[44];let $;e[45]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("div",{className:"p-6 border-b border-slate-200",children:t.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Registered Products"})}),e[45]=$):$=e[45];let g;e[46]!==G||e[47]!==J||e[48]!==l?(g=t.jsxs("div",{className:"rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden",children:[$,l.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(V,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No products yet"}),t.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Add products to your catalogue to start ordering stamps."}),t.jsxs(U,{href:"/taxpayer/products/create",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#003366] text-white rounded-lg hover:bg-[#002244] transition-colors",children:[t.jsx(W,{className:"w-4 h-4"}),"Add Your First Product"]})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Product"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Category"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Health Certificate"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Status"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Registered"}),t.jsx("th",{className:"text-left text-sm font-medium text-slate-500 px-6 py-3",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map(s=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-slate-900",children:s.name}),t.jsx("p",{className:"text-xs text-slate-500",children:s.code})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"inline-flex px-2.5 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:s.category||"N/A"})}),t.jsx("td",{className:"px-6 py-4",children:s.requires_health_certificate?s.health_certificate_number?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Z,{className:"w-4 h-4 text-emerald-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-900",children:s.health_certificate_number}),s.health_certificate_expiry&&t.jsxs("p",{className:"text-xs text-slate-500",children:["Expires: ",s.health_certificate_expiry]})]})]}):t.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[t.jsx(ce,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs",children:"Required"})]}):t.jsx("span",{className:"text-xs text-slate-400",children:"Not required"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${s.status==="active"?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:s.status||"active"})}),t.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:s.registration_date||"N/A"}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>J(s),className:"p-1.5 text-slate-400 hover:text-[#003366] hover:bg-[#003366]/10 rounded transition-colors",title:"Edit",children:t.jsx(me,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>G(s.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remove",children:t.jsx(ie,{className:"w-4 h-4"})})]})})]},s.id))})]})})]}),e[46]=G,e[47]=J,e[48]=l,e[49]=g):g=e[49];let N;e[50]!==j||e[51]!==g?(N=t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6 bg-slate-50",children:[R,j,g]}),e[50]=j,e[51]=g,e[52]=N):N=e[52];let y;e[53]!==a||e[54]!==B||e[55]!==c||e[56]!==I?(y=I&&c&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Edit Product"}),t.jsx("p",{className:"text-sm text-slate-500",children:c.name})]}),t.jsx("button",{onClick:()=>_(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx(ne,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:B,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Health Certificate #"}),t.jsx("input",{type:"text",value:a.data.health_certificate_number,onChange:s=>a.setData("health_certificate_number",s.target.value),placeholder:"HC-12345",className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Expiry Date"}),t.jsx("input",{type:"date",value:a.data.health_certificate_expiry,onChange:s=>a.setData("health_certificate_expiry",s.target.value),className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),t.jsxs("select",{value:a.data.status,onChange:s=>a.setData("status",s.target.value),className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes (Optional)"}),t.jsx("textarea",{value:a.data.notes,onChange:s=>a.setData("notes",s.target.value),rows:3,placeholder:"Any additional notes...",className:"w-full px-4 py-2.5 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#003366] focus:border-[#003366] transition-colors resize-none"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>_(!1),className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:a.processing,className:"flex-1 px-4 py-2.5 bg-[#003366] text-white rounded-lg hover:bg-[#002244] transition-colors disabled:opacity-50",children:a.processing?"Saving...":"Save Changes"})]})]})]})}),e[53]=a,e[54]=B,e[55]=c,e[56]=I,e[57]=y):y=e[57];let z;return e[58]!==N||e[59]!==y?(z=t.jsxs(le,{breadcrumbs:ue,children:[A,N,y]}),e[58]=N,e[59]=y,e[60]=z):z=e[60],z}function fe(i){return i.requires_health_certificate}function pe(i){return i.status==="active"}function be(){v.error("Failed to remove product. Reloading..."),ee.reload()}function je(){v.success("Product removed permanently")}function ge(){v.error("Failed to update product")}export{Fe as default};
